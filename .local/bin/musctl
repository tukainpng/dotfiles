#!/bin/sh

[ -z "$(pidof mako)" ] && mako &
[ -z "$(pidof dunst)" ] && dunst &
makoctl dismiss -a || dunstctl close-all

variables() {
  ESTADO=$(   playerctl status)
  ATUAL=$(    playerctl metadata xesam:artist; playerctl metadata xesam:album; playerctl metadata xesam:title)
  POSICAO=$(  playerctl metadata mpris:trackid | awk -F "/" '{ print "position: " $2 }'| tr "\'" " ")
}

current() {
  variables
  notify-send "$ATUAL" "$POSICAO"
}

jump() {
  playerctl $1 &&
  variables
  notify-send "$ATUAL" "$POSICAO"
}

seek() {
  playerctl position 10$1
}

case "$1" in
  "current") current;;
  "stop") playerctl stop; current;;
  "play-pause") playerctl play-pause; current;;
  "prev") jump previous;;
  "next") jump next;;
  "fwd") seek +;;
  "bkd") seek -;;
  *) exit;;
esac
